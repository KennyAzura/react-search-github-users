{"ast":null,"code":"var _jsxFileName = \"F:\\\\App\\\\react-app\\\\github-users\\\\src\\\\context\\\\context.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport mockUser from './mockData.js/mockUser';\nimport mockRepos from './mockData.js/mockRepos';\nimport mockFollowers from './mockData.js/mockFollowers';\nimport axios from 'axios';\nimport { MdLocalGasStation } from 'react-icons/md';\nconst rootUrl = 'https://api.github.com';\nconst GithubContext = React.createContext();\n\nconst GithubProvider = ({\n  children\n}) => {\n  const [githubUser, setGithubUser] = useState(mockUser);\n  const [repos, setRepos] = useState(mockRepos);\n  const [followers, setFollowers] = useState(mockFollowers); // requests loading\n\n  const [requests, setRequests] = useState(0);\n  const [isLoading, setIsLoading] = useState(false); // error\n\n  const [error, setError] = useState({\n    show: false,\n    msg: \"\"\n  }); // check requests\n\n  const checkRequests = () => {\n    axios(`${rootUrl}/rate_limit`).then(({\n      data\n    }) => {\n      let {\n        rate: {\n          remaining\n        }\n      } = data;\n      setRequests(remaining);\n\n      if (remaining === 0) {\n        toggleError(true, 'sorry, you have execeeded your hourly rate limit!');\n      }\n    }).catch(err => console.log(err));\n  };\n\n  function toggleError(show = false, msg = '') {\n    setError({\n      show,\n      msg\n    });\n  }\n\n  const searchGithubUser = async user => {\n    toggleError();\n    setIsLoading(true);\n    const response = await axios(`${rootUrl}/users/${user}`).catch(err => console.log(err));\n\n    if (response) {\n      setGithubUser(response.data);\n      const {\n        login,\n        followers_url\n      } = response.data; // repos\n\n      axios(`${rootUrl}/users/${login}/repos?per_page=100`).then(response => console.log(first)); // followers\n    } else {\n      toggleError(true, \"there is no user with that username\");\n    }\n\n    checkRequests();\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    checkRequests();\n  }, []);\n  return /*#__PURE__*/React.createElement(GithubContext.Provider, {\n    value: {\n      githubUser,\n      repos,\n      followers,\n      requests,\n      error,\n      searchGithubUser,\n      isLoading\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, children);\n};\n\nexport const useGlobalContext = () => {\n  return useContext(GithubContext);\n};\nexport { GithubProvider, GithubContext };","map":{"version":3,"sources":["F:/App/react-app/github-users/src/context/context.js"],"names":["React","useState","useEffect","useContext","mockUser","mockRepos","mockFollowers","axios","MdLocalGasStation","rootUrl","GithubContext","createContext","GithubProvider","children","githubUser","setGithubUser","repos","setRepos","followers","setFollowers","requests","setRequests","isLoading","setIsLoading","error","setError","show","msg","checkRequests","then","data","rate","remaining","toggleError","catch","err","console","log","searchGithubUser","user","response","login","followers_url","first","useGlobalContext"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport mockUser from './mockData.js/mockUser';\nimport mockRepos from './mockData.js/mockRepos';\nimport mockFollowers from './mockData.js/mockFollowers';\nimport axios from 'axios';\nimport { MdLocalGasStation } from 'react-icons/md';\n\nconst rootUrl = 'https://api.github.com';\n\nconst GithubContext = React.createContext()\n\nconst GithubProvider = ({children}) => {\n    const [githubUser, setGithubUser] = useState(mockUser)\n    const [repos, setRepos] = useState(mockRepos)\n    const [followers, setFollowers] = useState(mockFollowers)\n    // requests loading\n    const [requests, setRequests] = useState(0)\n    const [isLoading, setIsLoading] = useState(false)\n    // error\n    const [error, setError] = useState({ show: false, msg: \"\" });\n    // check requests\n    const checkRequests = () => {\n        axios(`${rootUrl}/rate_limit`)\n            .then(({data}) => {\n                let {rate: {remaining}} = data\n                setRequests(remaining)\n                if(remaining === 0) {\n                    toggleError(true, 'sorry, you have execeeded your hourly rate limit!')\n                }\n            })\n            .catch((err) => console.log(err))\n    }\n    \n    function toggleError(show = false, msg = '') {\n        setError({show,msg})\n    }\n\n    const searchGithubUser = async (user) => {\n        toggleError()\n        setIsLoading(true)\n        const response = await axios(`${rootUrl}/users/${user}`).catch(err => console.log(err))\n        if(response) {\n            setGithubUser(response.data)\n            const {login, followers_url} = response.data\n            // repos\n            axios(`${rootUrl}/users/${login}/repos?per_page=100`)\n                .then(response => console.log(first))\n            // followers\n\n        } else {\n            toggleError(true, \"there is no user with that username\");\n        }\n        checkRequests()\n        setIsLoading(false)\n    }\n\n    useEffect(() => {\n        checkRequests();\n    }, [])\n    return (\n      <GithubContext.Provider\n        value={{\n          githubUser,\n          repos,\n          followers,\n          requests,\n          error,\n          searchGithubUser,\n          isLoading\n        }}\n      >\n        {children}\n      </GithubContext.Provider>\n    );\n}\n\nexport const useGlobalContext = () => {\n    return useContext(GithubContext)\n}\n\nexport {GithubProvider, GithubContext}"]},"metadata":{},"sourceType":"module"}